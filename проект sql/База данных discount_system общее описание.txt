База данных discount_system общее описание

1. База данных discount_system предназначена для:
   - хранения информации о клиентах, продажах, номенклатуре, складах (магазинах),
     начислениях и списаниях бонусных баллов для участников дисконтной программы, 
     акциях, скидках 
   - расчета текущего баланса бонусных баллов
   - расчета скидок по постоянно и временно действующим акциям дисконтной программы
   - получения текущей истории покупок клиента
   - получения истории начисления и списания баллов
   - анализ продаж по магазинам, акциям, товарным категориям

   База не является товарно-учетной системой и не может использоваться для складского или кассового учета, однако может использоваться как источник данных о скидках и акциях для товарно-учетной и\или кассовой системы, интернет-магазина, мобильного приложения. 
   Вынесение дисконтной системы в автономную базу позволяет унифицировать расчет скидок внутри розничной или оптовой сети с филиалами, имеющими разные учетные системы, например, действующими одновременно в нескольких государствах, или использующих независимые технологические платформы в интернет магазине и в розничных точках, и консолидировать информацию о покупках клиентов сети для последующего анализа продаж. 



2. База состоит из таблиц:
- clients (данные о клиентах) 
- sales (общие данные о продажах и возвратах)
- shops (магазины)
- cities (города)
- products (товары)
- catalogs (группы товаров для формирования каталога)
- product_types (типы товаров для аналитики)
- sales_products (данные о товарах в продажах и возвратах)
- bonuses (данные о начислении и списании бонусов, в том числе продажами и возвратами)
- action_types (типы акций)
- actions (все действующие акции компании, изменение состава таблицы влияет на расчет скидки)
- discount_categories (типы карт лояльности для клиентов в зависимости от количества накопленных и потраченных бонусов, давности истории продаж, количества и общей суммы продаж)
- bonus_docs (дополнительные документы начисления и списания бонусов в честь какой-то акции или коррекции баланса по запросу клиента, независимо от продаж)
- bonus_balance (текущий баланс бонусов клиента, изменяется после каждого движения бонусов)
- current_discount (текущая постоянная скидка клиента)
- address (адрес клиента)



3. Контроль уникальности данных
- из внешних источников в базу данных попадают данные о товарах, продажах, возвратах, клиентах 
- уникальность продажи, возврата, клиента, товара для обмена с внешними системами обеспечивается через external_id (UUID), внутри базы UUID не генерируются, так как не генерируются новые данных этих таблиц 
- в исходящих данных передаются external_id клиентов, данных продаж и т.д. 
- первичные и внешние ключи для связи данных внутри базы - SERIAL

4. файлы проекта

дамп базы discount_system.sql
создание структуры sql_create_discount_system.sql
заполнение базы ds_filling.sql
запросы select_ds.txt
представления ds_views.sql
триггеры, функции ds_triggers_functions.sql

диаграмма ERD_discount_system.pgn








